!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};t[i][0].call(f.exports,function(e){var n=t[i][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";!function(){var t=e("../utils/mocha.js");"undefined"==typeof window?(self.goog=self.goog||{},self.goog.mochaUtils=self.goog.mochaUtils||t,self.addEventListener("message",function(e){switch(e.data){case"ready-check":e.ports[0].postMessage({ready:!0});break;case"start-tests":self.goog.mochaUtils.startInBrowserMochaTests().then(function(t){e.ports[0].postMessage(t)});break;default:e.ports[0].postMessage({error:"Unknown test name: "+e.data})}})):(window.goog=window.goog||{},window.goog.mochaUtils=window.goog.mochaUtils||t)}()},{"../utils/mocha.js":2}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(){r(this,e)}return o(e,[{key:"startInBrowserMochaTests",value:function(){var e=this;return new Promise(function(t){var n=[],r=[];mocha.checkLeaks();var o=mocha.run();return 0===o.total?void t({testResults:{passed:n,failed:r}}):(o.on("pass",function(t){n.push(e._getFriendlyTestResult(t))}).on("fail",function(t){r.push(e._getFriendlyTestResult(t))}).on("end",function(){t({testResults:{passed:n,failed:r}})}),void(0===mocha.suite.suites.length&&(console.warn("No tests found."),t({testResults:{passed:n,failed:r}}))))})}},{key:"startServiceWorkerMochaTests",value:function(e){var t=function(e,t,n){return new Promise(function(r,o){var s=new MessageChannel;s.port1.onmessage=function(e){r(e.data)},e.postMessage(t,[s.port2]),n&&setTimeout(function(){return o(new Error("Message Timeout"))},n)})};return window.goog.swUtils.activateSW(e).then(function(e){return e.contentWindow.navigator.serviceWorker.ready.then(function(e){return e.active}).then(function(e){return t(e,"ready-check",400).then(function(t){return t.ready?e:Promise.reject()})["catch"](function(){throw new Error("Service worker failed to respond to the ready check. Have you imported browser/mocha-utils.js in the SW?")})}).then(function(e){return t(e,"start-tests")}).then(function(e){if(!e.testResults)throw new Error("Unexpected test result: "+e);return e.testResults})})}},{key:"startWebDriverMochaTests",value:function(e,t,n){return new Promise(function(r,o){var s=t.get(n).then(function(){return t.executeScript(function(){return window.navigator.userAgent})}).then(function(t){console.log("        ["+e+" UA]: "+t)}).then(function(){return t.wait(function(){return t.executeScript(function(){return"undefined"!=typeof window.testsuite&&"undefined"!=typeof window.testsuite.testResults})})}).then(function(){return t.executeScript("return window.testsuite.testResults;")}).then(function(e){r(e)});s.thenCatch?s.thenCatch(o):s["catch"](o)})}},{key:"_getFriendlyTestResult",value:function(e){var t={parentTitle:e.parent.title,title:e.title,state:e.state};return e.err&&(t.errMessage=e.err.message),t}},{key:"prettyPrintErrors",value:function(e,t){if(t.failed.length>0){var n=t.failed,r="Issues in "+e+".\n\n"+e+" had "+t.failed.length+" test failures.\n";return r+="------------------------------------------------\n",r+=n.map(function(e,t){return"[Failed Test "+(t+1)+"]\n"+("    - "+e.parentTitle+" > "+e.title+"\n")+("        "+e.errMessage+"\n")}).join("\n"),r+="------------------------------------------------\n"}return null}}]),e}();if("undefined"==typeof t||"undefined"==typeof t.exports)throw new Error("To use MochaUtils in the browser please use the browser/mocha-utils.js file");t.exports=new s},{}]},{},[1]);
//# sourceMappingURL=mocha-utils.js.map
